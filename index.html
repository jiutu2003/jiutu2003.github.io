<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>jiutu2003</title><meta name="author" content="jiutu2003"><meta name="copyright" content="jiutu2003"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="jiutu2003">
<meta property="og:url" content="https://jiutu2003.github.io/index.html">
<meta property="og:site_name" content="jiutu2003">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/242ae48778369e7a.jpg">
<meta property="article:author" content="jiutu2003">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/242ae48778369e7a.jpg"><link rel="shortcut icon" href="/img/242ae48778369e7a.jpg"><link rel="canonical" href="https://jiutu2003.github.io/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'jiutu2003',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-03-07 10:46:03'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/242ae48778369e7a.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">28</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/1676127008797.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="jiutu2003"><span class="site-name">jiutu2003</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">jiutu2003</h1></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/%E5%AE%9E%E6%88%98/burpsuite%E9%9D%B6%E5%9C%BA/burpsuite-CSRF/" title="CSRF"><img class="post-bg" src="https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/bd1d78eb10e9f0020b63be426cb0920b.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSRF"></a></div><div class="recent-post-info"><a class="article-title" href="/%E5%AE%9E%E6%88%98/burpsuite%E9%9D%B6%E5%9C%BA/burpsuite-CSRF/" title="CSRF">CSRF</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-06T14:42:34.163Z" title="发表于 2023-03-06 22:42:34">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/">实战</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/burpsuite%E9%9D%B6%E5%9C%BA/">burpsuite靶场</a></span></div><div class="content">CSRF1.CSRF，其中令牌验证取决于请求方法

更改email，抓包

我们会发现在更改email的时候会有csrf令牌
某些应用程序在请求使用 POST 方法时正确验证Token，但在使用 GET 方法时跳过验证。
我们切换到GET的方式尝试一下

没有出现验证错误

发现确实更改了我们的email，说明成功了
我们打开漏洞利用服务器

使用CSRFPoC
操作和前面的几个题一样

把CSRF HTML复制到漏洞利用服务器的正文

成功解决
2.CSRF，其中令牌绑定到非会话 cookie
更改email，查看数据包


我们更改一下csrfKey

发现token不正确
我们再更改一下session

没有出现token错误的提示
说明绑定的是csrfKey
这是我们登录到另一个账号，然后抓包，修改csrf和csrfKey，尝试一下能不能修改成功
发现成功了

执行搜索，将结果请求发送到 Burp Repeater，并观察搜索词是否反映在 Set-Cookie 标头中。由于搜索功能没有 CSRF 保护，可以使用它向受害者用户的浏览器中注入 cookie

发现搜索词在set-c ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/%E5%AE%9E%E6%88%98/burpsuite%E9%9D%B6%E5%9C%BA/XSS/burpsuite%E9%9D%B6%E5%9C%BA-XSS/" title="XSS"><img class="post-bg" src="https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/bd1d78eb10e9f0020b63be426cb0920b.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="XSS"></a></div><div class="recent-post-info"><a class="article-title" href="/%E5%AE%9E%E6%88%98/burpsuite%E9%9D%B6%E5%9C%BA/XSS/burpsuite%E9%9D%B6%E5%9C%BA-XSS/" title="XSS">XSS</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-05T11:05:09.828Z" title="发表于 2023-03-05 19:05:09">2023-03-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/">实战</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/burpsuite%E9%9D%B6%E5%9C%BA/">burpsuite靶场</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/burpsuite%E9%9D%B6%E5%9C%BA/XSS/">XSS</a></span></div><div class="content">XSS跨站脚本1.在document.write中使用sourcelocation.search的DOM XSS随便输一个数字抓个包

根据返回的函数构造payload
payload1
1&#x27;&quot;&gt;&lt;script&gt;alert(1)&lt;/script&gt;&quot;&#x27;

payload2
1&#x27;&quot;&gt;&lt;svg onload=alert(1)&gt;

成功解决
2.使用sourcelocation.search的innerHTMLsink的DOM XSS
这里使用的是 innerHTML 去给serarchMessage 赋值
直接
1&lt;script&gt;alert(1)&lt;/script&gt;

发现没有回显，说明innerHTML进行了解码
我们对其编码一次
1&amp;lt;&amp;#115;&amp;#99;&amp;#114;&amp;#105;&amp;#112;&amp;#116;&amp;gt;&amp;#97;&amp;#108;&amp;#101;&amp;#114;&a ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/%E5%AE%9E%E6%88%98/burpsuite%E9%9D%B6%E5%9C%BA/SQL%E6%B3%A8%E5%85%A5/burpsuite%E9%9D%B6%E5%9C%BA-SQL%E6%B3%A8%E5%85%A5/" title="SQL注入"><img class="post-bg" src="https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/1676127008797.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SQL注入"></a></div><div class="recent-post-info"><a class="article-title" href="/%E5%AE%9E%E6%88%98/burpsuite%E9%9D%B6%E5%9C%BA/SQL%E6%B3%A8%E5%85%A5/burpsuite%E9%9D%B6%E5%9C%BA-SQL%E6%B3%A8%E5%85%A5/" title="SQL注入">SQL注入</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-03T14:45:02.839Z" title="发表于 2023-03-03 22:45:02">2023-03-03</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/">实战</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/burpsuite%E9%9D%B6%E5%9C%BA/">burpsuite靶场</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/burpsuite%E9%9D%B6%E5%9C%BA/SQL%E6%B3%A8%E5%85%A5/">SQL注入</a></span></div><div class="content">SQL注入1.union攻击，寻找包含文本的列
根据题目提示，我们随便点击一个类别，然后抓包


抓包之后就是进行注入，我们先看看有几列
1Gifts‘+order+by+3--

当我们尝试3时，发现页面正常了，说明有三列

然后我们在看看数据在哪一列回显，传入’IkwUmj‘，发现在第二列回显
1Gift&#x27;+union+select+null,&#x27;IkwUmj&#x27;,null--


2.union攻击，一列显示多个值
前几步和前面一样，先进入网页，选一个类别，抓包，修改数据包，判断列数，发现有两列，然后判断哪一列可以回显

发现第二列可以回显，于是我们就想如何通过一列显示用户名和密码
我们先逐个查询试试


发现可以显示用户名或密码，但我们并不知道用户名和密码的对应关系
于是，我们试着把username和password合并回显试试
12345不同数据库字符串的连接方法：Oracle: &#x27;foo&#x27;||&#x27;bar&#x27;SQL Server: &#x27;foo&#x27;+&#x27;bar&#x27;Mysql: &#x2 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/SQL/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%88%E6%9C%AC%E5%88%A4%E6%96%AD/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%88%E6%9C%AC%E5%88%A4%E6%96%AD/" title="数据库版本判断"><img class="post-bg" src="https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/e2e64442f954e1afe8fc5c0f52da114c.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据库版本判断"></a></div><div class="recent-post-info"><a class="article-title" href="/SQL/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%88%E6%9C%AC%E5%88%A4%E6%96%AD/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%88%E6%9C%AC%E5%88%A4%E6%96%AD/" title="数据库版本判断">数据库版本判断</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-02T14:29:42.465Z" title="发表于 2023-03-02 22:29:42">2023-03-02</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/SQL/">SQL</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/SQL/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%88%E6%9C%AC%E5%88%A4%E6%96%AD/">数据库版本判断</a></span></div><div class="content">12345各数据库查询版本语句：Mysql        SELECT version()Sql Server   SELECT @@versionOracle       SELECT * FROM v$versionPostgre      SELECT version()

12345各数据库查询版本语句：Mysql        SELECT version()Sql Server   SELECT @@versionOracle       SELECT * FROM v$versionPostgre      SELECT version()

12345时间延迟Oracle	dbms_pipe.receive_message((&#x27;a&#x27;),10)Microsoft	WAITFOR DELAY &#x27;0:0:10&#x27;PostgreSQL	SELECT pg_sleep(10)MySQL	SELECT SLEEP(10)

123456字符串拼接Oracle	&#x27;foo&#x27;||&#x27;bar&#x27;Microsoft	& ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/%E5%AE%9E%E6%88%98/ctfshow/ctfshow-%E8%8F%9C%E7%8B%97%E6%9D%AF/ctfshow-%E8%8F%9C%E7%8B%97%E6%9D%AF/" title="ctfshow-菜狗杯"><img class="post-bg" src="https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/e2e64442f954e1afe8fc5c0f52da114c.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ctfshow-菜狗杯"></a></div><div class="recent-post-info"><a class="article-title" href="/%E5%AE%9E%E6%88%98/ctfshow/ctfshow-%E8%8F%9C%E7%8B%97%E6%9D%AF/ctfshow-%E8%8F%9C%E7%8B%97%E6%9D%AF/" title="ctfshow-菜狗杯">ctfshow-菜狗杯</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-02T11:13:06.537Z" title="发表于 2023-03-02 19:13:06">2023-03-02</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/">实战</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/ctfshow/">ctfshow</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/ctfshow/ctfshow-%E8%8F%9C%E7%8B%97%E6%9D%AF/">ctfshow-菜狗杯</a></span></div><div class="content">菜狗杯1.web签到
考察REQUEST、GET、POST三者之间的区别
php中$ _request可以获取以POST方法和GET方法提交的数据,但是$ _request[]比较慢。通过post和get方法提交的所有数据都可以通过$ _REQUEST数组获得.

cookie传参CTFshow-QQ群:&#x3D;a
这时候POST就需要给a传一个值
post传参a&#x3D;b
这时候REQUEST就需要给b传一个值
request传参
1b=c&amp;c[6][0][7][5][8][0][9][4][4]=system(&#x27;ls&#x27;);

我的理解是传入b&#x3D;c这时候
1$_REQUEST[$_GET[$_POST[$_COOKIE[&#x27;CTFshow-QQ群:&#x27;]]]]=c

而后面的
1&amp;c[6][0][7][5][8][0][9][4][4]=system(&#x27;ls&#x27;);

是存入后台的
代码就变成了
1eval(c[6][0][7][5][8][0][9][4][4]);

在后台中
1c[6][0] ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/%E5%AE%9E%E6%88%98/ctfshow/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/ctfshow-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" title="反序列化"><img class="post-bg" src="https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/501ea766baf4b2a2c91d2e163d7c4b04.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="反序列化"></a></div><div class="recent-post-info"><a class="article-title" href="/%E5%AE%9E%E6%88%98/ctfshow/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/ctfshow-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" title="反序列化">反序列化</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-02-28T14:23:13.913Z" title="发表于 2023-02-28 22:23:13">2023-02-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/">实战</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/ctfshow/">ctfshow</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/ctfshow/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/">反序列化</a></span></div><div class="content">反序列化1.web255
需要一个cookie传参user，用ctfShowUser这个类反序列化，只要反序列化时把$isVip&#x3D;false改成true就行了
123456789101112131415161718192021222324&lt;?php$flag=&#x27;aaa&#x27;;class ctfShowUser&#123;public $username=&#x27;xxxxxx&#x27;;public $password=&#x27;xxxxxx&#x27;;public $isVip=true;public function checkVip()&#123;return $this-&gt;isVip;&#125;public function login($u,$p)&#123;return $this-&gt;username===$u&amp;&amp;$this-&gt;password===$p;&#125;public function vipOneKeyGetFlag()&#123;if($this-&gt;isVip)&#123;gl ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/%E5%AE%9E%E6%88%98/ctfshow/sql%E6%B3%A8%E5%85%A5/ctfshow-sql%E6%B3%A8%E5%85%A5/" title="sql注入"><img class="post-bg" src="https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/bd1d78eb10e9f0020b63be426cb0920b.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="sql注入"></a></div><div class="recent-post-info"><a class="article-title" href="/%E5%AE%9E%E6%88%98/ctfshow/sql%E6%B3%A8%E5%85%A5/ctfshow-sql%E6%B3%A8%E5%85%A5/" title="sql注入">sql注入</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-02-28T14:21:57.888Z" title="发表于 2023-02-28 22:21:57">2023-02-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/">实战</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/ctfshow/">ctfshow</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/ctfshow/sql%E6%B3%A8%E5%85%A5/">sql注入</a></span></div><div class="content">sql注入1.web199
用了一个alter
把表中的username和pass的名称进行互换，这样密码就变成了用户名，用户名0可以代表所有用户
payload
12用户名0;alter table ctfshow_user change `username` `passw2` text;alter table ctfshow_user change `pass` `username` text;alter table ctfshow_user change `passw2` `pass` text;密码123

提交显示密码错误，但语句执行了

然后我们再提交
12用户名0密码userAUTO


2.web202sqlmap的使用

输入id&#x3D;1，抓包看文件路径

知道文件路径后用sqlmap

显示跑成功了
继续–dbs显示数据库名


继续–tables，显示表名


继续–columns，显示列名

继续-dump，打印表

3.web207
过滤了空格，sqlmap中–tamper中有许多可以用的参数，其中space2comment可以把空格转换为别的

出现表 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/%E5%AE%9E%E6%88%98/ctfshow/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/ctfshow-%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/" title="文件包含"><img class="post-bg" src="https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/0e9124e63ff1380b2263f6437584cdf6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="文件包含"></a></div><div class="recent-post-info"><a class="article-title" href="/%E5%AE%9E%E6%88%98/ctfshow/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/ctfshow-%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/" title="文件包含">文件包含</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-02-28T14:20:24.130Z" title="发表于 2023-02-28 22:20:24">2023-02-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/">实战</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/ctfshow/">ctfshow</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/ctfshow/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/">文件包含</a></span></div><div class="content">文件包含1.web80
用日志包含绕过，将执行的命令插入日志中
日志通常地址为
12/var/log/nginx/error.log/var/log/nginx/access.log

通过file读取日志，发现内容为请求行、UA头、IP地址
在User-Agent后面插入代码
1&lt;?php echo system(&quot;ls&quot;);?&gt;

然后GET 
1?file=/var/log/nginx/access.log


然后修改执行的命令
1&lt;?php echo system(&quot;cat fl0g.php&quot;);?&gt;


2.web82
过滤了大量文件包含函数，这里我们利用PHP_SESSION_UPLOAD_PROGRESS加条件竞争进行文件包含
创建一个html文件，用POST的方式发包
12345678910111213&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;body&gt;&lt;form action=&quot;http://b19c75ee-d5d9-4a02-8379-d9881 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/%E5%AE%9E%E6%88%98/ctfshow/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/ctfshow-%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/" title="命令执行"><img class="post-bg" src="https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/923cae9672a5ef484ac0ed42599510f0.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="命令执行"></a></div><div class="recent-post-info"><a class="article-title" href="/%E5%AE%9E%E6%88%98/ctfshow/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/ctfshow-%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/" title="命令执行">命令执行</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-02-28T14:08:35.990Z" title="发表于 2023-02-28 22:08:35">2023-02-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/">实战</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/ctfshow/">ctfshow</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/ctfshow/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/">命令执行</a></span></div><div class="content">命令执行命令执行的一些方法：http://www.manongjc.com/detail/29-kfrycjwdgbrosjg.html
1.web30
这里把system与flag、php都过滤了
system绕过：可以使用passthru等函数绕过
flag.php绕过: 可以使用引号绕过fl””ag.p””hp,也可以使用通配符绕过fl*



2.web31
过滤了很多，我们可以通过嵌套的形式绕过
payload
1?c=eval($_GET[a]);&amp;a=system(&#x27;cat flag.php&#x27;);

打开之后查看源代码

3.web32
过滤了 空格 ; ( &#96; ‘ .
构造payload，并用php伪协议绕过
1?c=include$_GET[a]?&gt;&amp;a=php://filter/read=convert.base64-encode/resource=flag.php



一长串base64加密的信息，拿去解密

4.web37
用到data伪协议
payload
1?c=data://text/palin;base ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/%E5%AE%9E%E6%88%98/ctfshow/%E7%88%86%E7%A0%B4/ctfshow-%E7%88%86%E7%A0%B4/" title="爆破"><img class="post-bg" src="https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/735eceff91f2a291064f8242242c831b.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="爆破"></a></div><div class="recent-post-info"><a class="article-title" href="/%E5%AE%9E%E6%88%98/ctfshow/%E7%88%86%E7%A0%B4/ctfshow-%E7%88%86%E7%A0%B4/" title="爆破">爆破</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-02-28T13:59:36.613Z" title="发表于 2023-02-28 21:59:36">2023-02-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/">实战</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/ctfshow/">ctfshow</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E5%AE%9E%E6%88%98/ctfshow/%E7%88%86%E7%A0%B4/">爆破</a></span></div><div class="content">爆破1.web23

mt_srand和mt_rand
mt_srand() 函数播种 Mersenne Twister 随机数生成器。
mt_rand() 函数使用 Mersenne Twister 算法生成随机整数。
当随机数的种子是个确定值时(如本题),mt_rand()所得到的随机数也是确定的


得到flag
2.web25

传参r&#x3D;0，得到第一个mt_rand()的值
利用php_mt_seed工具爆破mt_srand()的值

根据返回数据包，php版本为7.3的，每个尝试一下
12345&lt;?phpmt_srand(2656564249);echo mt_rand().&quot;\n&quot;;echo mt_rand()+mt_rand();?&gt;



</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><a class="page-number" href="/page/3/#content-inner">3</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/242ae48778369e7a.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">jiutu2003</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">28</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/%E5%AE%9E%E6%88%98/burpsuite%E9%9D%B6%E5%9C%BA/burpsuite-CSRF/" title="CSRF"><img src="https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/bd1d78eb10e9f0020b63be426cb0920b.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSRF"/></a><div class="content"><a class="title" href="/%E5%AE%9E%E6%88%98/burpsuite%E9%9D%B6%E5%9C%BA/burpsuite-CSRF/" title="CSRF">CSRF</a><time datetime="2023-03-06T14:42:34.163Z" title="发表于 2023-03-06 22:42:34">2023-03-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E5%AE%9E%E6%88%98/burpsuite%E9%9D%B6%E5%9C%BA/XSS/burpsuite%E9%9D%B6%E5%9C%BA-XSS/" title="XSS"><img src="https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/bd1d78eb10e9f0020b63be426cb0920b.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="XSS"/></a><div class="content"><a class="title" href="/%E5%AE%9E%E6%88%98/burpsuite%E9%9D%B6%E5%9C%BA/XSS/burpsuite%E9%9D%B6%E5%9C%BA-XSS/" title="XSS">XSS</a><time datetime="2023-03-05T11:05:09.828Z" title="发表于 2023-03-05 19:05:09">2023-03-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E5%AE%9E%E6%88%98/burpsuite%E9%9D%B6%E5%9C%BA/SQL%E6%B3%A8%E5%85%A5/burpsuite%E9%9D%B6%E5%9C%BA-SQL%E6%B3%A8%E5%85%A5/" title="SQL注入"><img src="https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/1676127008797.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SQL注入"/></a><div class="content"><a class="title" href="/%E5%AE%9E%E6%88%98/burpsuite%E9%9D%B6%E5%9C%BA/SQL%E6%B3%A8%E5%85%A5/burpsuite%E9%9D%B6%E5%9C%BA-SQL%E6%B3%A8%E5%85%A5/" title="SQL注入">SQL注入</a><time datetime="2023-03-03T14:45:02.839Z" title="发表于 2023-03-03 22:45:02">2023-03-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/SQL/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%88%E6%9C%AC%E5%88%A4%E6%96%AD/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%88%E6%9C%AC%E5%88%A4%E6%96%AD/" title="数据库版本判断"><img src="https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/e2e64442f954e1afe8fc5c0f52da114c.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据库版本判断"/></a><div class="content"><a class="title" href="/SQL/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%88%E6%9C%AC%E5%88%A4%E6%96%AD/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%88%E6%9C%AC%E5%88%A4%E6%96%AD/" title="数据库版本判断">数据库版本判断</a><time datetime="2023-03-02T14:29:42.465Z" title="发表于 2023-03-02 22:29:42">2023-03-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E5%AE%9E%E6%88%98/ctfshow/ctfshow-%E8%8F%9C%E7%8B%97%E6%9D%AF/ctfshow-%E8%8F%9C%E7%8B%97%E6%9D%AF/" title="ctfshow-菜狗杯"><img src="https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/e2e64442f954e1afe8fc5c0f52da114c.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ctfshow-菜狗杯"/></a><div class="content"><a class="title" href="/%E5%AE%9E%E6%88%98/ctfshow/ctfshow-%E8%8F%9C%E7%8B%97%E6%9D%AF/ctfshow-%E8%8F%9C%E7%8B%97%E6%9D%AF/" title="ctfshow-菜狗杯">ctfshow-菜狗杯</a><time datetime="2023-03-02T11:13:06.537Z" title="发表于 2023-03-02 19:13:06">2023-03-02</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/SQL/"><span class="card-category-list-name">SQL</span><span class="card-category-list-count">3</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/SQL/MySQL/"><span class="card-category-list-name">MySQL</span><span class="card-category-list-count">2</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/SQL/MySQL/MySQL%E6%B3%A8%E5%85%A5%E5%87%BD%E6%95%B0/"><span class="card-category-list-name">MySQL注入函数</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/SQL/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%88%E6%9C%AC%E5%88%A4%E6%96%AD/"><span class="card-category-list-name">数据库版本判断</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Web/"><span class="card-category-list-name">Web</span><span class="card-category-list-count">6</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Web/Struts%E6%A1%86%E6%9E%B6%E6%BC%8F%E6%B4%9E/"><span class="card-category-list-name">Struts框架漏洞</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Web/Web%E6%A1%86%E6%9E%B6/"><span class="card-category-list-name">Web框架</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Web/Web%E6%A1%86%E6%9E%B6/Flask/"><span class="card-category-list-name">Flask</span><span class="card-category-list-count">1</span></a></li></ul></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/MySQL/" style="font-size: 1.1em; color: #999">MySQL</a> <a href="/tags/unittest/" style="font-size: 1.1em; color: #999">unittest</a> <a href="/tags/%E5%AE%9E%E6%88%98/" style="font-size: 1.5em; color: #99a9bf">实战</a> <a href="/tags/%E7%88%86%E7%A0%B4/" style="font-size: 1.1em; color: #999">爆破</a> <a href="/tags/Struts%E6%A1%86%E6%9E%B6%E6%BC%8F%E6%B4%9E/" style="font-size: 1.1em; color: #999">Struts框架漏洞</a> <a href="/tags/Web%E6%A1%86%E6%9E%B6/" style="font-size: 1.1em; color: #999">Web框架</a> <a href="/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" style="font-size: 1.1em; color: #999">反序列化</a> <a href="/tags/%E9%80%BB%E8%BE%91%E8%B6%8A%E6%9D%83/" style="font-size: 1.1em; color: #999">逻辑越权</a> <a href="/tags/%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90/" style="font-size: 1.1em; color: #999">域名解析</a> <a href="/tags/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/" style="font-size: 1.1em; color: #999">命令执行</a> <a href="/tags/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/" style="font-size: 1.1em; color: #999">文件包含</a> <a href="/tags/Flask/" style="font-size: 1.1em; color: #999">Flask</a> <a href="/tags/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" style="font-size: 1.1em; color: #999">信息收集</a> <a href="/tags/ctf/" style="font-size: 1.5em; color: #99a9bf">ctf</a> <a href="/tags/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/" style="font-size: 1.1em; color: #999">软件测试</a> <a href="/tags/SQL/" style="font-size: 1.1em; color: #999">SQL</a> <a href="/tags/MySQL%E6%B3%A8%E5%85%A5/" style="font-size: 1.1em; color: #999">MySQL注入</a> <a href="/tags/selenium/" style="font-size: 1.1em; color: #999">selenium</a> <a href="/tags/php%E6%8E%A2%E9%92%88/" style="font-size: 1.1em; color: #999">php探针</a> <a href="/tags/sql%E6%B3%A8%E5%85%A5/" style="font-size: 1.1em; color: #999">sql注入</a> <a href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/" style="font-size: 1.1em; color: #999">自动化测试</a> <a href="/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" style="font-size: 1.1em; color: #999">版本控制</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">三月 2023</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">二月 2023</span><span class="card-archive-list-count">17</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">22</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-03-07T02:46:02.827Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://skyserver-1316983678.cos.ap-beijing.myqcloud.com/img/1676127097053.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By jiutu2003</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>